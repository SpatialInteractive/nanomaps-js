<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="JsDoc Toolkit" />
		
		<title>JsDoc Reference - nanomaps.MapSurface</title>

		<style type="text/css">
			/* default.css */
body
{
	font: 12px "Lucida Grande", Tahoma, Arial, Helvetica, sans-serif;
	width: 800px;
}

.header
{
	clear: both;
	background-color: #ccc;
	padding: 8px;
}

h1
{
	font-size: 150%;
	font-weight: bold;
	padding: 0;
	margin: 1em 0 0 .3em;
}

hr
{
	border: none 0;
	border-top: 1px solid #7F8FB1;
	height: 1px;
}

pre.code
{
	display: block;
	padding: 8px;
	border: 1px dashed #ccc;
}

#index
{
	margin-top: 24px;
	float: left;
	width: 160px;
	position: absolute;
	left: 8px;
	background-color: #F3F3F3;
	padding: 8px;
}

#content
{
	margin-left: 190px;
	width: 600px;
}

.classList
{
	list-style-type: none;
	padding: 0;
	margin: 0 0 0 8px;
	font-family: arial, sans-serif;
	font-size: 1em;
	overflow: auto;
}

.classList li
{
	padding: 0;
	margin: 0 0 8px 0;
}

.summaryTable { width: 100%; }

h1.classTitle
{
	font-size:170%;
	line-height:130%;
}

h2 { font-size: 110%; }
caption, div.sectionTitle
{
	background-color: #7F8FB1;
	color: #fff;
	font-size:130%;
	text-align: left;
	padding: 2px 6px 2px 6px;
	border: 1px #7F8FB1 solid;
}

div.sectionTitle { margin-bottom: 8px; }
.summaryTable thead { display: none; }

.summaryTable td
{
	vertical-align: top;
	padding: 4px;
	border-bottom: 1px #7F8FB1 solid;
	border-right: 1px #7F8FB1 solid;
}

/*col#summaryAttributes {}*/
.summaryTable td.attributes
{
	border-left: 1px #7F8FB1 solid;
	width: 140px;
	text-align: right;
}

td.attributes, .fixedFont
{
	line-height: 15px;
	color: #002EBE;
	font-family: "Courier New",Courier,monospace;
	font-size: 13px;
}

.summaryTable td.nameDescription
{
	text-align: left;
	font-size: 13px;
	line-height: 15px;
}

.summaryTable td.nameDescription, .description
{
	line-height: 15px;
	padding: 4px;
	padding-left: 4px;
}

.summaryTable { margin-bottom: 8px; }

ul.inheritsList
{
	list-style: square;
	margin-left: 20px;
	padding-left: 0;
}

.detailList {
	margin-left: 20px; 
	line-height: 15px;
}
.detailList dt { margin-left: 20px; }

.detailList .heading
{
	font-weight: bold;
	padding-bottom: 6px;
	margin-left: 0;
}

.light, td.attributes, .light a:link, .light a:visited
{
	color: #777;
	font-style: italic;
}

.fineprint
{
	text-align: right;
	font-size: 10px;
}
		</style>
	</head>

	<body>
<!-- ============================== header ================================= -->	
		<!-- begin static/header.html -->
		<div id="header">
</div>
		<!-- end static/header.html -->

<!-- ============================== classes index ============================ -->
		<div id="index">
			<!-- begin publish.classesIndex -->
			<div align="center"><a href="../index.html">Class Index</a>
| <a href="../files.html">File Index</a></div>
<hr />
<h2>Classes</h2>
<ul class="classList">
	
	<li><i><a href="../symbols/_global_.html">_global_</a></i></li>
	
	<li><a href="../symbols/nanomaps.html">nanomaps</a></li>
	
	<li><a href="../symbols/nanomaps.EventEmitter.html">nanomaps.EventEmitter</a></li>
	
	<li><a href="../symbols/nanomaps.MapSurface.html">nanomaps.MapSurface</a></li>
	
</ul>
<hr />
			<!-- end publish.classesIndex -->
		</div>
		
		<div id="content">
<!-- ============================== class title ============================ -->
			<h1 class="classTitle">
				
				Class nanomaps.MapSurface
			</h1>

<!-- ============================== class summary ========================== -->			
			<p class="description">
				
				<br />Extends
					<a href="../symbols/nanomaps.EventEmitter.html">nanomaps.EventEmitter</a>.<br />
				
			
				
				
				
					<br /><i>Defined in: </i> <a href="../symbols/src/client_lib_nanomaps.core.js.html">nanomaps.core.js</a>.
				
			</p>

<!-- ============================== constructor summary ==================== -->			
			
			<table class="summaryTable" cellspacing="0" summary="A summary of the constructor documented in the class nanomaps.MapSurface.">
				<caption>Class Summary</caption>
				<thead>
					<tr>
						<th scope="col">Constructor Attributes</th>
						<th scope="col">Constructor Name and Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="attributes">&nbsp;</td>
						<td class="nameDescription" >
							<div class="fixedFont">
								<b><a href="../symbols/nanomaps.MapSurface.html#constructor">nanomaps.MapSurface</a></b>(elt)
							</div>
							<div class="description">Initialize an existing DOM element as a map.</div>
						</td>
					</tr>
				</tbody>
			</table>
			

<!-- ============================== properties summary ===================== -->
			

<!-- ============================== methods summary ======================== -->
			
				
				
				<table class="summaryTable" cellspacing="0" summary="A summary of the methods documented in the class nanomaps.MapSurface.">
					<caption>Method Summary</caption>
					<thead>
						<tr>
							<th scope="col">Method Attributes</th>
							<th scope="col">Method Name and Description</th>
						</tr>
					</thead>
					<tbody>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/nanomaps.MapSurface.html#attach">attach</a></b>(element)
								</div>
								<div class="description">Adds content to the map.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/nanomaps.MapSurface.html#collect">collect</a></b>(element)
								</div>
								<div class="description">Collects all unattached DOM elements from the container which have geo
referencing information and attaches them.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/nanomaps.MapSurface.html#createElement">createElement</a></b>()
								</div>
								<div class="description">Create an element in the document that this map exists in.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/nanomaps.MapSurface.html#eventToContainer">eventToContainer</a></b>(event, elementName)
								</div>
								<div class="description">Translates a mouse event to viewport relative coordinates and returns
{x:, y: }
<p>TODO: Fix this.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/nanomaps.MapSurface.html#initialize">initialize</a></b>()
								</div>
								<div class="description">Initialization hook.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/nanomaps.MapSurface.html#routeDomEvent">routeDomEvent</a></b>(domEventName, eventName, elementName)
								</div>
								<div class="description">Adds a DOM event listener to the given elementName (as found in the 
this.elements map) with the given event domEventName and eventName
to be raised on this instance.</div>
							</td>
						</tr>
					
					</tbody>
				</table>
				
				
				
				<dl class="inheritsList">
				<dt>Methods borrowed from class <a href="../symbols/nanomaps.EventEmitter.html">nanomaps.EventEmitter</a>: </dt><dd><a href="../symbols/nanomaps.EventEmitter.html#addListener">addListener</a>, <a href="../symbols/nanomaps.EventEmitter.html#advise">advise</a>, <a href="../symbols/nanomaps.EventEmitter.html#emit">emit</a>, <a href="../symbols/nanomaps.EventEmitter.html#once">once</a>, <a href="../symbols/nanomaps.EventEmitter.html#removeAllListeners">removeAllListeners</a>, <a href="../symbols/nanomaps.EventEmitter.html#removeListener">removeListener</a></dd>
				</dl>
				
			
<!-- ============================== events summary ======================== -->
			

<!-- ============================== constructor details ==================== -->		
			
			<div class="details"><a name="constructor"> </a>
				<div class="sectionTitle">
					Class Detail
				</div>
				
				<div class="fixedFont">
						<b>nanomaps.MapSurface</b>(elt)
				</div>
				
				<div class="description">
					Initialize an existing DOM element as a map.  All internal map structures
are added before any existing content in the element.

<h2>Sizing</h2>
The map size must be explicitly maintained.  If not specified, then the natural
size of the containing element is used.  If this natural size ever changes,
setSize() must be called to reset it.
					
				</div>
				
				
				
				
					
						<dl class="detailList">
						<dt class="heading">Parameters:</dt>
						
							<dt>
								<span class="light fixedFont">{HTMLElement}</span>  <b>elt</b>
								
							</dt>
								<dd>The map container element</dd>
						
							<dt>
								<span class="light fixedFont">{integer}</span>  <b>options.width</b>
								<i>Optional</i>
							</dt>
								<dd>Explicit width of the map</dd>
						
							<dt>
								<span class="light fixedFont">{integer}</span>  <b>options.height</b>
								<i>Optional</i>
							</dt>
								<dd>Explicit height of the map</dd>
						
							<dt>
								<span class="light fixedFont">{number}</span>  <b>options.resolution</b>
								<i>Optional</i>
							</dt>
								<dd>Initial resolution</dd>
						
							<dt>
								<span class="light fixedFont">{Projection}</span>  <b>options.projection</b>
								<i>Optional, Default: new nanomaps.WebMercatorProjection()</i>
							</dt>
								<dd>Map projection</dd>
						
							<dt>
								<span class="light fixedFont">{LatLngObject}</span>  <b>options.center</b>
								<i>Optional</i>
							</dt>
								<dd>Initial center of the map</dd>
						
						</dl>
					
					
					
					
					
					
					

			</div>
			

<!-- ============================== field details ========================== -->		
			

<!-- ============================== method details ========================= -->		
			
				<div class="sectionTitle">
					Method Detail
				</div>
				
					<a name="attach"> </a>
					<div class="fixedFont">
					
					
					<b>attach</b>(element)
					
					</div>
					<div class="description">
						Adds content to the map.  This is the primary method of attaching DOM content
to the map after construction.  Give it either an HTMLElement or a factory
object that supports a createElement(mapSurface) method.

<h2>Display Management</h2>
The primary thing that map content needs to be able to do is position itself
relative to a global coordinate system.  Each element managed by the map
viewport is checked for a special "mapDelegate" property.  If defined, then
this delegate object provides callbacks that will be invoked on map geometry
changes and are responsible for displaying the element properly.  See the
documentation for a complete treatment of MapDelegate objects.

<h2>Default Behavior</h2>
If an element added to the map does not have a mapDelegate property, the
default delegate is used instead.  This default delegate defines standard
and intuitive behavior for positioning a simple object.  The position and
pixel offset are determined by taking the first defined result from the
following sequence:
<ol>
<li>If the "geo" property exists on the DOM object.  Take the "latitude", 
		"longitude", "x" and "y" properties.
<li>Read the "latitude" and "longitude" attributes of the element.
</ol>
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{HTMLElement or factory}</span> <b>element</b>
									
								</dt>
								<dd>Element or factory to add</dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="collect"> </a>
					<div class="fixedFont">
					
					
					<b>collect</b>(element)
					
					</div>
					<div class="description">
						Collects all unattached DOM elements from the container which have geo
referencing information and attaches them.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{HTMLElement or factory}</span> <b>element</b>
									
								</dt>
								<dd>Element or factory to add</dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="createElement"> </a>
					<div class="fixedFont">
					
					<span class="light">{HTMLElement}</span>
					<b>createElement</b>()
					
					</div>
					<div class="description">
						Create an element in the document that this map exists in.
						
						
					</div>
					
					
					
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{HTMLElement}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="eventToContainer"> </a>
					<div class="fixedFont">
					
					
					<b>eventToContainer</b>(event, elementName)
					
					</div>
					<div class="description">
						Translates a mouse event to viewport relative coordinates and returns
{x:, y: }
<p>TODO: Fix this.  It doesn't work in a number of corner cases.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<span class="light fixedFont">{string}</span> <b>event</b>
									
								</dt>
								<dd>DOM event object</dd>
							
								<dt>
									<span class="light fixedFont">{string}</span> <b>elementName</b>
									<i>Optional, Default: 'viewport'</i>
								</dt>
								<dd>Relative to which element in the containment hierarchy</dd>
							
							</dl>
						
						
						
						
						
						
						

					<hr />
				
					<a name="initialize"> </a>
					<div class="fixedFont">
					
					
					<b>initialize</b>()
					
					</div>
					<div class="description">
						Initialization hook.  Performs initialization after map structures have
been initialized but before content is added to the map.  This method
does nothing but is an override hook for adding additional functionality.
						
						
					</div>
					
					
					
						
						
						
						
						
						
						

					<hr />
				
					<a name="routeDomEvent"> </a>
					<div class="fixedFont">
					
					
					<b>routeDomEvent</b>(domEventName, eventName, elementName)
					
					</div>
					<div class="description">
						Adds a DOM event listener to the given elementName (as found in the 
this.elements map) with the given event domEventName and eventName
to be raised on this instance.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>domEventName</b>
									
								</dt>
								<dd>DOM event name to listen</dd>
							
								<dt>
									<b>eventName</b>
									
								</dt>
								<dd>Name of event to emit on this instance (defaults to "dom_${domEventName})</dd>
							
								<dt>
									<b>elementName</b>
									
								</dt>
								<dd>Name of element in this.elements collection (defaults to
viewport)</dd>
							
							</dl>
						
						
						
						
						
						
						

					
				
			
			
<!-- ============================== event details ========================= -->		
			
			
			<hr />
		</div>

		
<!-- ============================== footer ================================= -->
		<div class="fineprint" style="clear:both">
			
			Documentation generated by <a href="http://code.google.com/p/jsdoc-toolkit/" target="_blank">JsDoc Toolkit</a> 2.3.2 on Mon Dec 13 2010 14:00:13 GMT-0700 (MST)
		</div>
	</body>
</html>
