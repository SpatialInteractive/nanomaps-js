function MakeBezierCurve(c,i,b,h){var e=3*c,g=3*(b-c)-e,a=1-e-g,d=3*i,f=3*(h-i)-d,j=1-d-f;return function(l,n){if(!n){n=[]}var m=l*l,k=m*l;n[0]=a*k+g*m+e*l;n[1]=j*k+f*m+d*l;return n}}var ANIMATION_DEFAULT_OPTIONS={curve:MakeBezierCurve(0.25,0.25,0.25,0.25),duration:0.5,rate:10};function Animation(b,a){if(!a){a=ANIMATION_DEFAULT_OPTIONS}this._f=b;this._c=a.curve||ANIMATION_DEFAULT_OPTIONS.curve;this._d=a.duration||ANIMATION_DEFAULT_OPTIONS.duration;this._r=a.rate||ANIMATION_DEFAULT_OPTIONS.rate;this._s=0}Animation.prototype={start:function(){if(this._s!==0){return}var b=this,c,a;b._ts=now();b._td=b._d*1000;b._te=b._ts+b._td;b._tn=0;c=b._d*b._r;a=(b._te-b._ts)/c;if(a<=0){b._s=2;b._f(0,[0,0],true)}else{b._s=1;b._ii=setInterval(function(){b._frame()},a);b._frame()}},finish:function(){this._last()},interrupt:function(){var a=this,b=a._ii;if(a._s===2){return}if(b){clearInterval(b)}a._s=2},_frame:function(){var a=this,d=now(),b=(d-a._ts)/a._td,c;if(b>=1||b<0||isNaN(b)){a._final();return}c=a._c(b);a._f(++a._tn,c,false)},_final:function(){var a=this,b=a._ii;if(a._s===2){return}if(b){clearInterval(b)}a._s=2;a._f(a._tn,[1,1],true);a._f=null}};exports.MakeBezierCurve=MakeBezierCurve;exports.Animation=Animation;