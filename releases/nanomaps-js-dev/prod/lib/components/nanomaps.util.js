function createFunction(){return function(){}}function ObjectCreate(b){if(Object.create){return Object.create(b)}var a;if(b){a=createFunction();a.prototype=b;return new a()}return{}}function inherits(b,a){var c=ObjectCreate(a.prototype);ObjectCopy(b.prototype,c);b.prototype=c}function ObjectCopy(c,b){b=b||{};if(c){for(var a in c){if(c.hasOwnProperty(a)){b[a]=c[a]}}}return b}exports.ObjectCreate=ObjectCreate;exports.ObjectCopy=ObjectCopy;exports.inherits=inherits;function EventEmitter(){}var EventEmitterMethods=EventEmitter.prototype={};EventEmitterMethods._evt=EventEmitterMethods.listeners=function(a){var c=this.__evt,b;if(!c){this.__evt=c={}}b=c[a];if(!b){b=c[a]=[]}return b};EventEmitterMethods.addListener=EventEmitterMethods.on=function(a,b){this._evt(a).push(b)};EventEmitterMethods.once=function(a,b){this._evt(a+"$once").push(b)};EventEmitterMethods.removeListener=function(b,c){a(this._evt(b));a(this._evt(b+"$once"));function a(e){for(var d=e.length-1;d>=0;d--){if(e[d]===c){e.splice(d,1)}}}};EventEmitterMethods.removeAllListeners=function(a){this._evt(a).length=0;this._evt(a+"$once").length=0};EventEmitterMethods.emit=function(d){var b,e,a=Array.prototype.slice.call(arguments,1),c=this["on"+d];if(typeof c==="function"){c.apply(this,a)}e=this._evt(d+"$once");for(b=0;b<e.length;b++){e[b].apply(this,a)}e.length=0;e=this._evt(d);for(b=0;b<e.length;b++){e[b].apply(this,a)}};EventEmitterMethods.advise=function(b,c,f){var e=this[b],a,d;if(!e||!e.__stub__||!this.hasOwnProperty(b)){a=this[b]=getAdvisorStub(e)}else{a=e}d=a[c];if(d){d.push(f)}};function getAdvisorStub(b){var a=function(){var c,e=arguments.callee,d,f;d=e.before;for(c=0;c<d.length;c++){d[c].apply(this,arguments)}if(b){f=b.apply(this,arguments)}d=e.after;for(c=0;c<d.length;c++){d[c].apply(this,arguments)}};a.__stub__=true;a.before=[];a.after=[];return a}function now(){return new Date().getTime()}function isFunction(a){return typeof a==="function"}function throwNotDomElement(a){throw new Error("Object "+a+" is not a DOM element")}function dupArray(a){return Array.prototype.slice(a)}exports.EventEmitter=EventEmitter;